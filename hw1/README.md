# Поднятие базы и заполнение 
`docker-compose build && docker-compose up -d` из директории `./hw1`
# Запросы
### Выборка данных
`select1.json`
```
{
    "Fare": {
        "$gt": 25,
        "$lt": 26
    }, 
    "Sex": "male"
}
```
Без индексов
![image info](./images/select1/image1.png)
С `ASC` индексом на `Fare`
![image info](./images/select1/image2.png)
Запрос возвращает небольшое число докуметов. Очевидно что забать немного данных быстрее имея сортировку по нужному полю, что и видим.

`select2.json`
```
{
    "Fare": {
        "$gt": 25,
        "$lt": 26
    }, 
    "Sex": "male"
}
```
Без индексов
![image info](./images/select2/image1.png)
С `ASC` индексом на `Fare`
![image info](./images/select2/image2.png)
Здесь данных возвращается порядка размера всей базы, поэтому индекс не сильно помогает, и даже ухудшает немного, что видим.

`select3.json`
У монги есть полнотекстовый поиск, но для него нужен индекс, поэтому без индекса заменяем его регуляркой. Ищем людей у которых есть `Williams` в составе `Name`.
```
[
    {
        "Name": { "$regex": ".*Williams( |-|$)" }
    },
    {
        "$text": { "$search": "\"Williams\"" }
    }
]
```
Без индексов
![image info](./images/select3/image1.png)
С `text` индексом на `Name`
![image info](./images/select3/image2.png)
Как видим, в случае регулярки проходимся по всей базе регуляркой и это очень долго, с полнотекстовым индексом быстрее, но понятно что возможности регулярок шире, но в данном случае при поиске конкретной фамилии или ее части полнотекстовый индекс молодец.

Теперь для `update`, вот свобдка результатов замеров
![image info](./images/update/image.png)

Как видимо в случае `update1` у нас большую часть времени составляет поиск записей для редактирования и с индексом получается быстрее.

В случае `update2` мы изменяем поле на котором строится полнотекстовый индекс, и его обновление как видим занимает время.

В случае `update3` мы не трогаем поле с текстом в обновлении, поэтому видим что просто искалось быстрее благодоря индексу.
